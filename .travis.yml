language: scala

sudo: false

scala:
- "2.11.12"
- "2.12.12"
- "2.13.3"

jdk:
  - openjdk8

script:
  - git config core.whitespace tab-in-indent,trailing-space,space-before-tab,cr-at-eol
  - git show --oneline --check
  - sbt "++${TRAVIS_SCALA_VERSION}!" testSequential

matrix:
  include:
  - scala: "2.11.12"
    sudo: required
    before_install:
    - curl https://raw.githubusercontent.com/scala-native/scala-native/master/scripts/travis_setup.sh | bash -x
    script:
    - sbt "++${TRAVIS_SCALA_VERSION}!" "msgpack4z-argonautNative/test:nativeLink"
  - scala: "2.12.12"
    jdk: openjdk11
    dist: xenial

cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt/launchers"
  - "$HOME/.cache/coursier"

before_cache:
  - find $HOME/.ivy2/cache -name "ivydata-*.properties" | xargs rm
  - find $HOME/.ivy2/cache -name "*SNAPSHOT*" | xargs rm -rf
